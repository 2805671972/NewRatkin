<?xml version="1.0" encoding="utf-8"?>
<Defs>
	<!-- 단검 -->
	<ThingDef ParentName="RK_MeleeWeapon">
		<defName>RK_Dagger</defName>
		<label>ratkin dagger</label>
		<description>작고 깜찍한 단검입니다. 가벼운만큼 빠르게 찌를 수 있습니다. 손잡이가 너무 작아 인간이 사용하기 힘들어 보입니다.</description>
		<graphicData>
			<texPath>Weapon/Dagger</texPath>
			<graphicClass>Graphic_Single</graphicClass>
		</graphicData>
		<techLevel>Medieval</techLevel>
		<weaponTags Inherit="false">
			<li>RK_MeleeWeapon_Short</li>
			<li>RK_LightWeapon</li>
			<li>RK_Defender</li>
		</weaponTags>
		<statBases>
			<WorkToMake>2500</WorkToMake>
			<Mass>0.8</Mass>
		</statBases>
		<equippedAngleOffset>65</equippedAngleOffset>
		<costList>
			<WoodLog>15</WoodLog>
		</costList>
		<costStuffCount>25</costStuffCount>
		<stuffCategories>
			<li>Metallic</li>
		</stuffCategories>
		<tools>
			<li>
				<label>point</label>
				<capacities>
					<li>Stab</li>
				</capacities>
				<power>15</power>
				<cooldownTime>2</cooldownTime>
			</li>
			<li>
				<label>edge</label>
				<capacities>
					<li>Cut</li>
				</capacities>
				<power>12</power>
				<cooldownTime>1.5</cooldownTime>
				<surpriseAttack>
					<extraMeleeDamages>
						<li>
							<def>Stun</def>
							<amount>10</amount>
						</li>						
						<li>
							<def>Cut</def>
							<amount>15</amount>
						</li>
					</extraMeleeDamages>
				</surpriseAttack>
			</li>
		</tools>
		<recipeMaker>
			<researchPrerequisite>Smithing</researchPrerequisite>
			<skillRequirements>
				<Crafting>4</Crafting>
			</skillRequirements>
		</recipeMaker>
		<comps>
			<li Class="SYS.CompProperties_Sheath">
				<sheathOnlyGraphicData>
					<texPath>Weapon/Dagger_Sheath</texPath>
					<graphicClass>Graphic_Multi</graphicClass>
				</sheathOnlyGraphicData>
				<fullGraphicData>
					<texPath>Weapon/Dagger_Full</texPath>
					<graphicClass>Graphic_Multi</graphicClass>
				</fullGraphicData>
				<drawPosition>Side</drawPosition>
				<northOffset>
					<position>(-0.2,0,-0.2)</position>
					<angle>0</angle>
				</northOffset>
				<southOffset>
					<position>(0.2,0,-0.2)</position>
					<angle>0</angle>
				</southOffset>
				<eastOffset>
					<position>(0,-0.009,-0.2)</position>
					<angle>150</angle>
				</eastOffset>
				<westOffset>
					<position>(0,-0.039,-0.2)</position>
					<angle>-150</angle>
				</westOffset>
			</li>
			<li Class="SYS.CompProperties_WeaponExtention">
				<northOffset>
					<position>(0.3,-0.03,-0.12)</position>
					<angle>90</angle>
				</northOffset>
				<eastOffset>
					<position>(0.3,0.03,-0.15)</position>
					<angle>75</angle>
				</eastOffset>
				<southOffset>
					<position>(-0.3,0.3,-0.22)</position>
					<angle>-90</angle>
				</southOffset>
				<westOffset>
					<position>(-0.3,-0.03,-0.15)</position>
					<angle>-75</angle>
				</westOffset>
			</li>
		</comps>
	</ThingDef>

	<!-- 한손검 -->
	<ThingDef ParentName="RK_MeleeWeapon">
		<defName>RK_OneHanded</defName>
		<label>ratkin one handed sword</label>
		<description>한손에 들 수 있는 검입니다. 완벽한 무게 밸런스를 이루고 있습니다. 손잡이가 너무 작아 인간이 사용하기 힘들어 보입니다.</description>
		<graphicData>
			<texPath>Weapon/OneHanded</texPath>
			<graphicClass>Graphic_Single</graphicClass>
		</graphicData>
		<techLevel>Medieval</techLevel>
		<weaponTags Inherit="false">
			<li>RK_Sword</li>
			<li>RK_Knight</li>
			<li>RK_LightWeapon</li>
			<li>RK_Defender</li>
			<li>RK_EliteDefender</li>
		</weaponTags>
		<statBases>
			<WorkToMake>16000</WorkToMake>
			<Mass>1.2</Mass>
		</statBases>
		<equippedAngleOffset>-65</equippedAngleOffset>
		<costList>
			<WoodLog>25</WoodLog>
		</costList>
		<stuffCategories>
			<li>Metallic</li>
		</stuffCategories>
		<costStuffCount>90</costStuffCount>
		<tools>
			<li>
				<label>point</label>
				<capacities>
					<li>Stab</li>
				</capacities>
				<power>21</power>
				<cooldownTime>2.4</cooldownTime>
			</li>
			<li>
				<label>edge</label>
				<capacities>
					<li>Cut</li>
				</capacities>
				<power>21</power>
				<cooldownTime>2.4</cooldownTime>
			</li>
			<li>
				<label>handle</label>
				<capacities>
					<li>Blunt</li>
				</capacities>
				<power>10</power>
				<cooldownTime>1.8</cooldownTime>
			</li>
		</tools>
		<recipeMaker>
			<researchPrerequisite>Smithing</researchPrerequisite>
			<skillRequirements>
				<Crafting>5</Crafting>
				<Artistic>1</Artistic>
			</skillRequirements>
		</recipeMaker>
		<comps>
			<li Class="SYS.CompProperties_Sheath">
				<sheathOnlyGraphicData>
					<texPath>Weapon/OneHanded_Sheath</texPath>
					<graphicClass>Graphic_Multi</graphicClass>
				</sheathOnlyGraphicData>
				<fullGraphicData>
					<texPath>Weapon/OneHanded_Full</texPath>
					<graphicClass>Graphic_Multi</graphicClass>
				</fullGraphicData>
				<drawPosition>Side</drawPosition>
				<northOffset>
					<position>(0.2,0,-0.2)</position>
					<angle>0</angle>
				</northOffset>
				<southOffset>
					<position>(-0.2,0,-0.2)</position>
					<angle>0</angle>
				</southOffset>
				<eastOffset>
					<position>(0,-0.039,-0.2)</position>
					<angle>150</angle>
				</eastOffset>
				<westOffset>
					<position>(0,-0.009,-0.2)</position>
					<angle>-150</angle>
				</westOffset>
			</li>
			<li Class="SYS.CompProperties_WeaponExtention">
				<northOffset>
					<position>(0.3,-0.03,0.1)</position>
					<angle>-75</angle>
				</northOffset>
				<eastOffset>
					<position>(0.3,0.03,-0.15)</position>
					<angle>-20</angle>
				</eastOffset>
				<southOffset>
					<position>(-0.3,0.3,0)</position>
					<angle>75</angle>
				</southOffset>
				<westOffset>
					<position>(-0.3,-0.03,-0.15)</position>
					<angle>20</angle>
				</westOffset>
			</li>
		</comps>
	</ThingDef>

	<!-- 라이트 랜스 -->
	<ThingDef ParentName="RK_MeleeWeapon">
		<defName>RK_LightLance</defName>
		<label>ratkin wooden lance</label>
		<description>철을 덧대어 파괴력을 높힌 목재 랜스입니다. 무게 때문에 숙달되지 않으면 명중시키기 힘들어 보입니다. 손잡이가 너무 작아 인간이 사용하기 힘들어 보입니다.</description>
		<graphicData>
			<texPath>Weapon/RK_LightLance</texPath>
			<graphicClass>Graphic_Single</graphicClass>
		</graphicData>
		<techLevel>Medieval</techLevel>
		<weaponTags Inherit="false">
			<li>RK_MeleeWeapon_Lance</li>
			<li>RK_Knight</li>
			<li>RK_Defender</li>
		</weaponTags>
		<costList>
			<WoodLog>100</WoodLog>
			<Steel>25</Steel>
		</costList>
		<statBases>
			<WorkToMake>20000</WorkToMake>
			<Mass>8</Mass>		
		</statBases>
		<equippedStatOffsets>
			<MeleeHitChance>-3</MeleeHitChance>	
		</equippedStatOffsets>
		<equippedAngleOffset>45</equippedAngleOffset>
		<tools>
			<li>
				<label>point</label>
				<capacities>
					<li>Stab</li>
				</capacities>
				<power>27</power>
				<cooldownTime>2.5</cooldownTime>
			</li>
			<li>
				<label>point</label>
				<capacities>
					<li>Cut</li>
				</capacities>
				<power>21</power>
				<cooldownTime>2.8</cooldownTime>
			</li>
			<li>
				<label>shaft</label>
				<capacities>
					<li>Blunt</li>
				</capacities>
				<power>13</power>
				<cooldownTime>2.8</cooldownTime>
			</li>
		</tools>
		<recipeMaker>
			<researchPrerequisite>Smithing</researchPrerequisite>
			<skillRequirements>
				<Crafting>6</Crafting>
			</skillRequirements>
		</recipeMaker>
		<comps>
			<li Class="SYS.CompProperties_WeaponExtention">
				<littleDown>True</littleDown>
				<northOffset>
					<position>(0.2,0,0.25)</position>
					<angle>-45</angle>
				</northOffset>
				<southOffset>
					<position>(-0.25,0.3,0.2)</position>
					<angle>45</angle>
				</southOffset>
				<eastOffset>
					<position>(0.15,0.3,0.2)</position>
					<angle>-45</angle>
				</eastOffset>
				<westOffset>
					<position>(-0.15,-0.3,0.2)</position>
					<angle>45</angle>
				</westOffset>
			</li>
		</comps>
	</ThingDef>

	<!-- 양손검 -->
	<ThingDef ParentName="RK_MeleeWeapon">
		<defName>RK_TwoHanded</defName>
		<label>ratkin two handed sword</label>
		<description>양손으로 들 수 있는 검입니다. 무겁지만 적을 확실하게 두동강 낼 수 있습니다.</description>
		<graphicData>
			<texPath>Weapon/TwoHanded</texPath>
			<graphicClass>Graphic_Single</graphicClass>
		</graphicData>
		<techLevel>Medieval</techLevel>
		<weaponTags Inherit="false">
			<li>RK_Sword</li>
			<li>RK_Knight</li>
			<!-- <li>RK_Vanguard</li> -->
		</weaponTags>
		<statBases>
			<WorkToMake>24000</WorkToMake>
			<Mass>4</Mass>
		</statBases>
		<equippedAngleOffset>-120</equippedAngleOffset>
		<costStuffCount>120</costStuffCount>
		<stuffCategories>
			<li>WeaponMetallic</li>
		</stuffCategories>
		<costList>
			<Steel>50</Steel>
			<Silver>15</Silver>
			<WoodLog>45</WoodLog>
		</costList>
		<tools>
			<li>
				<label>handle</label>
				<capacities>
					<li>Blunt</li>
				</capacities>
				<power>12</power>
				<cooldownTime>2</cooldownTime>
			</li>
			<li>
				<label>point</label>
				<capacities>
					<li>Stab</li>
				</capacities>
				<power>27</power>
				<cooldownTime>2.9</cooldownTime>
			</li>
			<li>
				<label>edge</label>
				<capacities>
					<li>Cut</li>
				</capacities>
				<power>27</power>
				<cooldownTime>2.9</cooldownTime>
			</li>
		</tools>
		<recipeMaker>
			<researchPrerequisite>LongBlades</researchPrerequisite>
			<skillRequirements>
				<Crafting>7</Crafting>
				<Artistic>3</Artistic>
			</skillRequirements>
		</recipeMaker>
		<comps>
			<li Class="SYS.CompProperties_WeaponExtention">
				<northOffset>
					<position>(-0.25,0,0.35)</position>
					<angle>-135</angle>
				</northOffset>
				<southOffset>
					<position>(0.25,0.3,0.25)</position>
					<angle>135</angle>
				</southOffset>
				<eastOffset>
					<position>(0.15,-0.03,0.25)</position>
					<angle>-135</angle>
				</eastOffset>
				<westOffset>
					<position>(-0.15,0.3,0.25)</position>
					<angle>135</angle>
				</westOffset>
			</li>
			<li Class="SYS.CompProperties_Sheath">		
				<sheathOnlyGraphicData>
					<texPath>Weapon/TwoHanded_Sheath</texPath>
					<graphicClass>Graphic_Multi</graphicClass>
				</sheathOnlyGraphicData>
				<fullGraphicData>
					<texPath>Weapon/TwoHanded_Full</texPath>
					<graphicClass>Graphic_Multi</graphicClass>
				</fullGraphicData>
				<drawPosition>Back</drawPosition>
				<northOffset>
					<position>(0,0.05,0)</position>
					<angle>20</angle>
				</northOffset>
				<southOffset>
					<position>(0,0,0.1)</position>
					<angle>20</angle>
				</southOffset>
				<eastOffset>
					<position>(-0.25,0,0.1)</position>
					<angle>50</angle>
				</eastOffset>
				<westOffset>
					<position>(0.25,-0.03,0.1)</position>
					<angle>-50</angle>
				</westOffset>
			</li>
		</comps>
	</ThingDef>

	<!-- 헤비랜스 -->
	<ThingDef ParentName="RK_MeleeWeapon">
		<defName>RK_HeavyLance</defName>
		<label>ratkin heavy lance</label>
		<description>크고 무거운 금속 랜스입니다. 육중한 무게로 대상의 장갑을 확실하게 뚫을 수 있습니다. 무게 때문에 숙달되지 않으면 명중시키기 힘들어 보입니다. 손잡이가 너무 작아 인간이 사용하기 힘들어 보입니다.</description>
		<graphicData>
			<texPath>Weapon/RK_HeavyLance</texPath>
			<graphicClass>Graphic_Single</graphicClass>
		</graphicData>
		<techLevel>Medieval</techLevel>
		<weaponTags Inherit="false">
			<li>RK_Knight</li>
			<li>RK_HeavyLance</li>
			<li>RK_EliteDefender</li>
		</weaponTags>
		<costStuffCount>150</costStuffCount>
		<stuffCategories>
			<li>WeaponMetallic</li>
		</stuffCategories>
		<costList>
			<Steel>50</Steel>
			<WoodLog>25</WoodLog>
		</costList>
		<statBases>
			<WorkToMake>28000</WorkToMake>
			<Mass>12</Mass>
		</statBases>
		<equippedStatOffsets>
			<MeleeHitChance>-4</MeleeHitChance>	
		</equippedStatOffsets>
		<equippedAngleOffset>45</equippedAngleOffset>
		<tools>
			<li>
				<label>point</label>
				<capacities>
					<li>Stab</li>
				</capacities>
				<power>32</power>
				<cooldownTime>3</cooldownTime>
			</li>
			<li>
				<label>point</label>
				<capacities>
					<li>Cut</li>
				</capacities>
				<power>27</power>
				<cooldownTime>3.4</cooldownTime>
			</li>
			<li>
				<label>shaft</label>
				<capacities>
					<li>Blunt</li>
				</capacities>
				<power>16</power>
				<cooldownTime>3.4</cooldownTime>
			</li>
		</tools>
		<recipeMaker>
			<researchPrerequisite>PiercingWeapon</researchPrerequisite>
			<skillRequirements>
				<Crafting>8</Crafting>
			</skillRequirements>
		</recipeMaker>
		<comps>
			<li Class="SYS.CompProperties_WeaponExtention">
				<littleDown>True</littleDown>
				<northOffset>
					<position>(0.2,0,0.25)</position>
					<angle>-45</angle>
				</northOffset>
				<southOffset>
					<position>(-0.25,0.3,0.2)</position>
					<angle>45</angle>
				</southOffset>
				<eastOffset>
					<position>(0.15,0.3,0.2)</position>
					<angle>-45</angle>
				</eastOffset>
				<westOffset>
					<position>(-0.15,-0.3,0.2)</position>
					<angle>45</angle>
				</westOffset>
			</li>
		</comps>
	</ThingDef>

	<!-- 건랜스 -->
	<ThingDef ParentName="RK_MeleeWeapon">
		<defName>RK_Gunlance_ProtoType</defName>
		<label>ratkin gunlance(proto)</label>
		<description>포격이 가능한 무거운 기계식 랜스입니다. 포격시 전방으로 화염을 방사합니다.\n전용 탄환을 이용하여 용격포를 쏠 수 있습니다. 한번 용격포를 사용하면 포격을 멈출 수 없기 때문에 사용자는 자세를 고정할 수 밖에 없습니다.</description>
		<graphicData>
			<onGroundRandomRotateAngle>0</onGroundRandomRotateAngle>
			<texPath>Weapon/RK_GunlanceA</texPath>
			<graphicClass>Graphic_Single</graphicClass>
		</graphicData>
		<techLevel>Industrial</techLevel>
		<weaponTags Inherit="false">
			<li>RK_EliteDefender</li>
		</weaponTags>
		<costStuffCount>100</costStuffCount>
		<stuffCategories>
			<li>Metallic</li>
		</stuffCategories>
		<costList>
			<Steel>100</Steel>
			<ComponentIndustrial>8</ComponentIndustrial>
		</costList>
		<statBases>
			<WorkToMake>35000</WorkToMake>
			<Mass>20</Mass>
			<AccuracyTouch>1</AccuracyTouch>
			<AccuracyShort>1</AccuracyShort>
			<RangedWeapon_Cooldown>3</RangedWeapon_Cooldown>
		</statBases>
		<equippedStatOffsets>
			<MeleeHitChance>-4</MeleeHitChance>	
			<MoveSpeed>-0.25</MoveSpeed>
		</equippedStatOffsets>
		<equippedAngleOffset>45</equippedAngleOffset>
		<tools>
			<li>
				<label>point</label>
				<capacities>
					<li>GunlanceFire</li>
				</capacities>
				<power>16</power>
				<cooldownTime>3</cooldownTime>
			</li>
			<li>
				<label>edge</label>
				<capacities>
					<li>GunlanceFire</li>
					<li>Cut</li>
				</capacities>
				<power>25</power>
				<cooldownTime>3.4</cooldownTime>
			</li>
		</tools>
		<recipeMaker>
			<researchPrerequisite>Machining</researchPrerequisite>
			<skillRequirements>
				<Crafting>10</Crafting>
			</skillRequirements>
		</recipeMaker>
		<comps>
			<li Class="SYS.CompProperties_WeaponExtention">
				<littleDown>True</littleDown>
				<northOffset>
					<position>(0.45,0,0.15)</position>
					<angle>-15</angle>
				</northOffset>
				<southOffset>
					<position>(-0.45,0.3,0.1)</position>
					<angle>35</angle>
				</southOffset>
				<eastOffset>
					<position>(0.45,0.3,-0.05)</position>
					<angle>10</angle>
				</eastOffset>
				<westOffset>
					<position>(-0.45,-0.3,-0.05)</position>
					<angle>-10</angle>
				</westOffset>
			</li>			
			<li Class="CompProperties_Refuelable">
				<compClass>NewRatkin.CompGunlanceFuel</compClass>
				<fuelLabel>Shots until barrel change</fuelLabel>
				<fuelGizmoLabel>wyvern ammo</fuelGizmoLabel>
				<fuelFilter>
					<thingDefs>
						<li>Steel</li>
					</thingDefs>
				</fuelFilter>
				<fuelCapacity>3</fuelCapacity>
				<initialFuelPercent>1</initialFuelPercent>
				<autoRefuelPercent>0.75</autoRefuelPercent>
				<showFuelGizmo>true</showFuelGizmo>
				<consumeFuelOnlyWhenUsed>true</consumeFuelOnlyWhenUsed>
				<outOfFuelMessage>Ammo out: Needs Wyvern ammo</outOfFuelMessage>
				<fuelIconPath>UI/Overlays/Barrel</fuelIconPath>
			</li>
		</comps>
		<verbs>
			<li Class="NewRatkin.VerbProperties_Gunlance">
				<verbClass>NewRatkin.Verb_WyvernFire</verbClass>
				<hasStandardCommand>true</hasStandardCommand>
				<warmupTime>0.5</warmupTime>
				<range>5</range>
				<onlyManualCast>True</onlyManualCast>
				<muzzleFlashScale>15</muzzleFlashScale>
				<consumeFuelPerShot>1</consumeFuelPerShot>
				<burstShotCount>2</burstShotCount>
				<ticksBetweenBurstShots>130</ticksBetweenBurstShots>
				<damageDef>Flame</damageDef>
				<damageAmount>40</damageAmount>
				<stopBurstWithoutLos>false</stopBurstWithoutLos>
				<targetParams>
					<canTargetLocations>true</canTargetLocations>
				</targetParams>
				<angle>50</angle>
			</li>
		</verbs>
	</ThingDef>

	<ToolCapacityDef>
		<defName>GunlanceFire</defName>
	</ToolCapacityDef>

	<ManeuverDef>
		<defName>RK_GunlanceExplosion</defName>
		<requiredCapacity>GunlanceFire</requiredCapacity>
		<verb Class="NewRatkin.VerbProperties_Gunlance">
			<verbClass>NewRatkin.Verb_GunlanceFiring</verbClass>
			<damageDef>Flame</damageDef>
			<damageAmount>20</damageAmount>
			<range>2</range>
			<angle>50</angle>
		</verb>
		<logEntryDef>MeleeAttack</logEntryDef>
		<combatLogRulesHit>RK_Maneuver_Shell_MeleeHit</combatLogRulesHit>
		<combatLogRulesDeflect>RK_Maneuver_Shell_MeleeDeflect</combatLogRulesDeflect>
		<combatLogRulesMiss>RK_Maneuver_Shell_MeleeMiss</combatLogRulesMiss>
		<combatLogRulesDodge>RK_Maneuver_Shell_MeleeDodge</combatLogRulesDodge>
	</ManeuverDef>

	<ThingDef ParentName="EtherealThingBase">
		<defName>GunlanceExplosion</defName>
		<label>explosion</label>
		<thingClass>NewRatkin.GunlanceExplosion</thingClass>
		<tickerType>Normal</tickerType>
	</ThingDef>	
	
	<RulePackDef>
		<defName>RK_Maneuver_Shell</defName>
		<rulePack>
			<rulesStrings>
				<li>damaged_inf(p=4)->shell</li>
				<li>damaged_inf(deflected!=True)->shell</li>
				<li>damaged_inf->shell</li>

				<li>damaged_past(p=4)->shelled</li>
				<li>damaged_past(deflected!=True)->shelled</li>
				<li>damaged_past->shelled</li>

				<li>damaged_present->shelling</li>
				<li>damaged_present(deflected!=True)->shelling</li>

				<li>destroyed_past->cremated</li>
				<li>destroyed_past->incinerated</li>
				<li>destroyed_past->charred</li>
				<li>destroyed_past->obliterated</li>
				<li>destroyed_past->annihilated</li>
				<li>destroyed_past->detonated</li>
				<li>destroyed_past->shattered</li>
				<li>destroyed_past->crushed</li>

				<li>destroyed_present->cremating</li>
				<li>destroyed_present->incinerating</li>
				<li>destroyed_present->charring</li>
				<li>destroyed_present->obliterating</li>
				<li>destroyed_present->annihilating</li>
				<li>destroyed_present->detonating</li>
			</rulesStrings>
		</rulePack>
	</RulePackDef>
	<RulePackDef>
		<defName>RK_Maneuver_Shell_MeleeHit</defName>
		<include>
			<li>RK_Maneuver_Shell</li>
			<li>Combat_Hit</li>
		</include>
	</RulePackDef>
	<RulePackDef>
		<defName>RK_Maneuver_Shell_MeleeDeflect</defName>
		<include>
			<li>RK_Maneuver_Shell</li>
			<li>Combat_Deflect</li>
		</include>
	</RulePackDef>
	<RulePackDef>
		<defName>RK_Maneuver_Shell_MeleeMiss</defName>
		<include>
			<li>RK_Maneuver_Shell</li>
			<li>Combat_Miss</li>
		</include>
	</RulePackDef>
	<RulePackDef>
		<defName>RK_Maneuver_Shell_MeleeDodge</defName>
		<include>
			<li>RK_Maneuver_Shell</li>
			<li>Combat_Dodge</li>
		</include>
	</RulePackDef>
</Defs>